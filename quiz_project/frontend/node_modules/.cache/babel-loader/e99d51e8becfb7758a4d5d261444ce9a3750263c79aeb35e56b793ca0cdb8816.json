{"ast":null,"code":"import { createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const createData = createAsyncThunk(\"createData\", async (singUpData, thunkAPI) => {\n  try {\n    const response = await fetch(\"https://crudapi.co.uk/api/v1/singupData\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      },\n      body: JSON.stringify([singUpData])\n    });\n    const data = await response.json();\n    localStorage.setItem(\"user\", JSON.stringify(data.items[0]));\n    console.log(data, \"THUNK DATA\");\n    return thunkAPI.fulfillWithValue(data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message, \"THUNK BLOCK\");\n  }\n});\nexport const fetchUserData = createAsyncThunk(\"fetchUserData/data\", async (_, thunkAPI) => {\n  try {\n    const response = await fetch(\"https://crudapi.co.uk/api/v1/singupData\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      }\n    });\n    if (!response.ok) throw new Error(`BAD RESPONSE`);\n    const data = await response.json();\n    return thunkAPI.fulfillWithValue(data.items);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\nexport const deleteUser = createAsyncThunk(\"deleteUser\", async (id, thunkAPI) => {\n  try {\n    const response = await fetch(`https://crudapi.co.uk/api/v1/singupData/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      }\n    });\n    if (!response.ok) console.log(`BAD RESPONSE`);\n    const data = response.json();\n    const deleted = data.items.filter(rest => rest._uuid !== id);\n    console.log(deleted, \"TELEDET\");\n    return thunkAPI.dispatch(deleted);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});","map":{"version":3,"names":["createAsyncThunk","createData","singUpData","thunkAPI","response","fetch","method","headers","Authorization","process","env","REACT_APP_API_KEY","body","JSON","stringify","data","json","localStorage","setItem","items","console","log","fulfillWithValue","error","rejectWithValue","message","fetchUserData","_","ok","Error","deleteUser","id","deleted","filter","rest","_uuid","dispatch"],"sources":["/home/joni/Desktop/quiz_project/frontend/src/store/signup/createData.thunk.js"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport const createData = createAsyncThunk(\n  \"createData\",\n  async (singUpData, thunkAPI) => {\n    try {\n      const response = await fetch(\"https://crudapi.co.uk/api/v1/singupData\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`,\n        },\n        body: JSON.stringify([singUpData]),\n      });\n      const data = await response.json();\n      localStorage.setItem(\"user\", JSON.stringify(data.items[0]));\n      console.log(data, \"THUNK DATA\");\n      return thunkAPI.fulfillWithValue(data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message, \"THUNK BLOCK\");\n    }\n  }\n);\n\nexport const fetchUserData = createAsyncThunk(\n  \"fetchUserData/data\",\n  async (_, thunkAPI) => {\n    try {\n      const response = await fetch(\"https://crudapi.co.uk/api/v1/singupData\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`,\n        },\n      });\n\n      if (!response.ok) throw new Error(`BAD RESPONSE`);\n      const data = await response.json();\n      return thunkAPI.fulfillWithValue(data.items);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const deleteUser = createAsyncThunk(\n  \"deleteUser\",\n  async (id, thunkAPI) => {\n    try {\n      const response = await fetch(\n        `https://crudapi.co.uk/api/v1/singupData/${id}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`,\n          },\n        }\n      );\n\n      if (!response.ok) console.log(`BAD RESPONSE`);\n      const data = response.json();\n      const deleted = data.items.filter((rest) => rest._uuid !== id);\n\n      console.log(deleted, \"TELEDET\");\n      return thunkAPI.dispatch(deleted);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}